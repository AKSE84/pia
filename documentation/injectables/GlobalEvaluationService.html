<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>pia documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">pia documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>
            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>GlobalEvaluationService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/global-evaluation.service.ts</code>
        </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#answerEditionEnabled">answerEditionEnabled</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#answersOrMeasures">answersOrMeasures</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#behaviorSubject">behaviorSubject</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#enablePiaValidation">enablePiaValidation</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#evaluationEditionEnabled">evaluationEditionEnabled</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#evaluations">evaluations</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#item">item</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pia">pia</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#piaIsRefused">piaIsRefused</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#questionsOrMeasures">questionsOrMeasures</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#reference_to">reference_to</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#section">section</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#status">status</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#answerIsValid">answerIsValid</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#answersVerification">answersVerification</a>
                            </li>
                            <li>
                                <a href="#cancelForEvaluation">cancelForEvaluation</a>
                            </li>
                            <li>
                                <a href="#cancelValidation">cancelValidation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#createOrUpdateEvaluation">createOrUpdateEvaluation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#deleteEvaluationInDb">deleteEvaluationInDb</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#dpoValidation">dpoValidation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#evaluationCompleted">evaluationCompleted</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#evaluationIsValid">evaluationIsValid</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#evaluationNotStarted">evaluationNotStarted</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#evaluationStarted">evaluationStarted</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#evaluationsToBeFixed">evaluationsToBeFixed</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#evaluationsVerification">evaluationsVerification</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getAnswerReferenceTo">getAnswerReferenceTo</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#measureIsValid">measureIsValid</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#prepareForEvaluation">prepareForEvaluation</a>
                            </li>
                            <li>
                                <a href="#setAnswerEditionEnabled">setAnswerEditionEnabled</a>
                            </li>
                            <li>
                                <a href="#setEvaluationEditionEnabled">setEvaluationEditionEnabled</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#validate">validate</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#validateAllEvaluation">validateAllEvaluation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#verification">verification</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="answerIsValid"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            answerIsValid
                            </b>
                            <a href="#answerIsValid"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>answerIsValid(answer: <a href="../classes/Answer.html">Answer</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="437" class="link-to-prism">src/app/services/global-evaluation.service.ts:437</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Is the answer valid?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>answer</td>
                                                        <td>
                                                                    <code><a href="../classes/Answer.html" target="_self" >Answer</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>An Answer.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="answersVerification"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Async</span>
                            answersVerification
                            </b>
                            <a href="#answersVerification"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>answersVerification()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="494" class="link-to-prism">src/app/services/global-evaluation.service.ts:494</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Verification for all answers.</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cancelForEvaluation"></a>
                        <span class="name">
                            <b>
                            cancelForEvaluation
                            </b>
                            <a href="#cancelForEvaluation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>cancelForEvaluation()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="145" class="link-to-prism">src/app/services/global-evaluation.service.ts:145</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Cancel evaluation and return in edit mode.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cancelValidation"></a>
                        <span class="name">
                            <b>
                            cancelValidation
                            </b>
                            <a href="#cancelValidation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>cancelValidation()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="167" class="link-to-prism">src/app/services/global-evaluation.service.ts:167</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Cancel validation and return in evaluation mode.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="createOrUpdateEvaluation"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Async</span>
                            createOrUpdateEvaluation
                            </b>
                            <a href="#createOrUpdateEvaluation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>createOrUpdateEvaluation(new_reference_to?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="267" class="link-to-prism">src/app/services/global-evaluation.service.ts:267</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Create a new evaluation or udpate it.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>new_reference_to</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>The reference.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="deleteEvaluationInDb"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Async</span>
                            deleteEvaluationInDb
                            </b>
                            <a href="#deleteEvaluationInDb"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>deleteEvaluationInDb(reference_to: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="607" class="link-to-prism">src/app/services/global-evaluation.service.ts:607</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Delete evaluation in database.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>reference_to</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>The reference.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="dpoValidation"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            dpoValidation
                            </b>
                            <a href="#dpoValidation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>dpoValidation()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="198" class="link-to-prism">src/app/services/global-evaluation.service.ts:198</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Verification for DPD fields.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationCompleted"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            evaluationCompleted
                            </b>
                            <a href="#evaluationCompleted"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>evaluationCompleted(evaluation: <a href="../classes/Evaluation.html">Evaluation</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="394" class="link-to-prism">src/app/services/global-evaluation.service.ts:394</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>The evaluation is completed?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>evaluation</td>
                                                        <td>
                                                                    <code><a href="../classes/Evaluation.html" target="_self" >Evaluation</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>An Evaluation.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationIsValid"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            evaluationIsValid
                            </b>
                            <a href="#evaluationIsValid"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>evaluationIsValid(evaluation: <a href="../classes/Evaluation.html">Evaluation</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="469" class="link-to-prism">src/app/services/global-evaluation.service.ts:469</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Is the evaluation valid?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>evaluation</td>
                                                        <td>
                                                                    <code><a href="../classes/Evaluation.html" target="_self" >Evaluation</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>An Evaluation.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationNotStarted"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            evaluationNotStarted
                            </b>
                            <a href="#evaluationNotStarted"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>evaluationNotStarted(evaluation: <a href="../classes/Evaluation.html">Evaluation</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="408" class="link-to-prism">src/app/services/global-evaluation.service.ts:408</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>The evaluation isn&#39;t started?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>evaluation</td>
                                                        <td>
                                                                    <code><a href="../classes/Evaluation.html" target="_self" >Evaluation</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>An Evaluation.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationStarted"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            evaluationStarted
                            </b>
                            <a href="#evaluationStarted"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>evaluationStarted(evaluation: <a href="../classes/Evaluation.html">Evaluation</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="380" class="link-to-prism">src/app/services/global-evaluation.service.ts:380</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>The evaluation is started?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>evaluation</td>
                                                        <td>
                                                                    <code><a href="../classes/Evaluation.html" target="_self" >Evaluation</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>An Evaluation.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationsToBeFixed"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            evaluationsToBeFixed
                            </b>
                            <a href="#evaluationsToBeFixed"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>evaluationsToBeFixed(evaluation: <a href="../classes/Evaluation.html">Evaluation</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="366" class="link-to-prism">src/app/services/global-evaluation.service.ts:366</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>The evaluation need to be fixed?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>evaluation</td>
                                                        <td>
                                                                    <code><a href="../classes/Evaluation.html" target="_self" >Evaluation</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>An Evaluation.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationsVerification"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Async</span>
                            evaluationsVerification
                            </b>
                            <a href="#evaluationsVerification"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>evaluationsVerification()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="545" class="link-to-prism">src/app/services/global-evaluation.service.ts:545</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Verification for all evaluations.</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getAnswerReferenceTo"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            getAnswerReferenceTo
                            </b>
                            <a href="#getAnswerReferenceTo"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>getAnswerReferenceTo(answerOrMeasure: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="248" class="link-to-prism">src/app/services/global-evaluation.service.ts:248</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Get the reference.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>answerOrMeasure</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>Any Answer or Measure.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                            </div>
                                <div class="io-description">
                                    <ul>
<li>The reference.</li>
</ul>

                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="measureIsValid"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            measureIsValid
                            </b>
                            <a href="#measureIsValid"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>measureIsValid(measure: <a href="../classes/Measure.html">Measure</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="422" class="link-to-prism">src/app/services/global-evaluation.service.ts:422</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Is the measure valid?</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>measure</td>
                                                        <td>
                                                                    <code><a href="../classes/Measure.html" target="_self" >Measure</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><ul>
<li>A Measure.</li>
</ul>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="prepareForEvaluation"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Async</span>
                            prepareForEvaluation
                            </b>
                            <a href="#prepareForEvaluation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>prepareForEvaluation()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="66" class="link-to-prism">src/app/services/global-evaluation.service.ts:66</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Prepare all evaluations for the current item, it depends on &quot;evaluation_mode&quot;.</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="setAnswerEditionEnabled"></a>
                        <span class="name">
                            <b>
                            setAnswerEditionEnabled
                            </b>
                            <a href="#setAnswerEditionEnabled"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>setAnswerEditionEnabled()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="626" class="link-to-prism">src/app/services/global-evaluation.service.ts:626</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Set answer edition by status.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="setEvaluationEditionEnabled"></a>
                        <span class="name">
                            <b>
                            setEvaluationEditionEnabled
                            </b>
                            <a href="#setEvaluationEditionEnabled"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>setEvaluationEditionEnabled()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="634" class="link-to-prism">src/app/services/global-evaluation.service.ts:634</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Set evaluation edition by status.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="validate"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Async</span>
                            validate
                            </b>
                            <a href="#validate"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>validate(callSubject: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/app/services/global-evaluation.service.ts:33</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Verifications for answers and evaluations.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>callSubject</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>true</code>
                                                        </td>

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="validateAllEvaluation"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Async</span>
                            validateAllEvaluation
                            </b>
                            <a href="#validateAllEvaluation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>validateAllEvaluation()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="92" class="link-to-prism">src/app/services/global-evaluation.service.ts:92</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Validate all evaluations.</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="verification"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            verification
                            </b>
                            <a href="#verification"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>verification()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="295" class="link-to-prism">src/app/services/global-evaluation.service.ts:295</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Do a global verification.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="answerEditionEnabled"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            answerEditionEnabled
                            </b>
                            <a href="#answerEditionEnabled"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>answerEditionEnabled:     <code></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>false</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/app/services/global-evaluation.service.ts:16</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="answersOrMeasures"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            answersOrMeasures
                            </b>
                            <a href="#answersOrMeasures"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>answersOrMeasures:     <code><a href="../classes/Measure.html" target="_self" >Array&lt;Answer | Measure&gt;</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/Measure.html" target="_self" >Array&lt;Answer | Measure&gt;</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="22" class="link-to-prism">src/app/services/global-evaluation.service.ts:22</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="behaviorSubject"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            behaviorSubject
                            </b>
                            <a href="#behaviorSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>behaviorSubject:     <code></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject&lt;Object&gt;({})</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/services/global-evaluation.service.ts:25</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="enablePiaValidation"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            enablePiaValidation
                            </b>
                            <a href="#enablePiaValidation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>enablePiaValidation:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/services/global-evaluation.service.ts:19</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluationEditionEnabled"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            evaluationEditionEnabled
                            </b>
                            <a href="#evaluationEditionEnabled"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>evaluationEditionEnabled:     <code></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>false</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/app/services/global-evaluation.service.ts:17</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="evaluations"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            evaluations
                            </b>
                            <a href="#evaluations"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>evaluations:     <code><a href="../classes/Evaluation.html" target="_self" >Array&lt;Evaluation&gt;</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/Evaluation.html" target="_self" >Array&lt;Evaluation&gt;</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/services/global-evaluation.service.ts:23</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="item"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            item
                            </b>
                            <a href="#item"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>item:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/app/services/global-evaluation.service.ts:14</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="pia"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            pia
                            </b>
                            <a href="#pia"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>pia:     <code><a href="../classes/Pia.html" target="_self" >Pia</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/Pia.html" target="_self" >Pia</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="12" class="link-to-prism">src/app/services/global-evaluation.service.ts:12</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="piaIsRefused"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            piaIsRefused
                            </b>
                            <a href="#piaIsRefused"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>piaIsRefused:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">src/app/services/global-evaluation.service.ts:20</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="questionsOrMeasures"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            questionsOrMeasures
                            </b>
                            <a href="#questionsOrMeasures"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>questionsOrMeasures:     <code>Array&lt;any&gt;</code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Array&lt;any&gt;</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/services/global-evaluation.service.ts:21</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="reference_to"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            reference_to
                            </b>
                            <a href="#reference_to"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>reference_to:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/app/services/global-evaluation.service.ts:18</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="section"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            section
                            </b>
                            <a href="#section"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>section:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="13" class="link-to-prism">src/app/services/global-evaluation.service.ts:13</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="status"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            status
                            </b>
                            <a href="#status"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>status:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/app/services/global-evaluation.service.ts:15</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { BehaviorSubject } from &#x27;rxjs/BehaviorSubject&#x27;;
import { Observable } from &#x27;rxjs/Observable&#x27;;

import { Answer } from &#x27;../entry/entry-content/questions/answer.model&#x27;;
import { Evaluation } from &#x27;../entry/entry-content/evaluations/evaluation.model&#x27;;
import { Measure } from &#x27;../entry/entry-content/measures/measure.model&#x27;;
import { Pia } from &#x27;../entry/pia.model&#x27;;

@Injectable()
export class GlobalEvaluationService {
  public pia: Pia;
  public section: any;
  public item: any;
  public status: number;
  public answerEditionEnabled &#x3D; false;
  public evaluationEditionEnabled &#x3D; false;
  public reference_to: string;
  public enablePiaValidation: boolean;
  public piaIsRefused: boolean;
  private questionsOrMeasures: Array&lt;any&gt;;
  private answersOrMeasures: Array&lt;Answer|Measure&gt;;
  private evaluations: Array&lt;Evaluation&gt;;

  public behaviorSubject &#x3D; new BehaviorSubject&lt;Object&gt;({});

  /**
   * Verifications for answers and evaluations.
   * @param {boolean} [callSubject&#x3D;true]
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  async validate(callSubject &#x3D; true) {
    this.reference_to &#x3D; this.section.id + &#x27;.&#x27; + this.item.id;
    return new Promise(async (resolve, reject) &#x3D;&gt; {
      if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27; || this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;question&#x27;) {
        await this.answersVerification();
        await this.evaluationsVerification();
        this.verification();
        if (callSubject) {
          this.setAnswerEditionEnabled();
          this.setEvaluationEditionEnabled();
          this.behaviorSubject.next({
            reference_to: this.reference_to,
            status: this.status
          });
        }
      } else if (this.reference_to &#x3D;&#x3D;&#x3D; &#x27;4.3&#x27;) {
        this.dpoValidation();
        this.behaviorSubject.next({
          reference_to: this.reference_to,
          status: this.status
        });
      } else {
        this.status &#x3D; 0;
      }
      resolve({ reference_to: this.reference_to, status: this.status });
    });
  }

  /**
   * Prepare all evaluations for the current item, it depends on &quot;evaluation_mode&quot;.
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  async prepareForEvaluation() {
    return new Promise(async (resolve, reject) &#x3D;&gt; {
      if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27;) {
        await this.createOrUpdateEvaluation();
        await this.validate();
        resolve();
      } else {
        await this.answersVerification();
        let count &#x3D; 0;
        this.answersOrMeasures.forEach(async (answerOrMeasure: Answer|Measure) &#x3D;&gt; {
          count++;
          this.createOrUpdateEvaluation(this.getAnswerReferenceTo(answerOrMeasure));
          if (count &#x3D;&#x3D;&#x3D; this.answersOrMeasures.length) {
            await this.validate();
            resolve();
          }
        });
      }
    });
  }

  /**
   * Validate all evaluations.
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  async validateAllEvaluation() {
    return new Promise((resolve, reject) &#x3D;&gt; {
      if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27;) {
        const evaluation &#x3D; new Evaluation();
        evaluation.getByReference(this.pia.id, this.reference_to).then(async () &#x3D;&gt; {
          if (evaluation.status &#x3D;&#x3D;&#x3D; 0) {
            await this.validate();
            resolve(false);
          }
          if (evaluation.status &#x3D;&#x3D;&#x3D; 1) {
            evaluation.global_status &#x3D; 1;
          } else {
            evaluation.global_status &#x3D; 2;
          }
          evaluation.update().then(async() &#x3D;&gt; {
            await this.validate();
            resolve(evaluation.status &#x3D;&#x3D;&#x3D; 1);
          });
        });
      } else if (this.answersOrMeasures.length &gt; 0) {
        let count &#x3D; 0;
        let toFix &#x3D; false;
        this.answersOrMeasures.forEach((answerOrMeasure) &#x3D;&gt; {
          const evaluation &#x3D; new Evaluation();
          evaluation.getByReference(this.pia.id, this.getAnswerReferenceTo(answerOrMeasure)).then(async() &#x3D;&gt; {
            if (evaluation.status &gt; 0) {
              if (evaluation.status &#x3D;&#x3D;&#x3D; 1) {
                evaluation.global_status &#x3D; 1;
                toFix &#x3D; true;
              } else {
                evaluation.global_status &#x3D; 2;
              }
              evaluation.update().then(async () &#x3D;&gt; {
                count++;
                if (count &#x3D;&#x3D;&#x3D; this.answersOrMeasures.length) {
                  await this.validate();
                  resolve(toFix);
                }
              });
            } else {
              await this.validate();
              resolve(false);
            }
          });
        });
      }
    });
  }

  /**
   * Cancel evaluation and return in edit mode.
   * @memberof GlobalEvaluationService
   */
  cancelForEvaluation() {
    if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27;) {
      this.deleteEvaluationInDb(this.reference_to).then(() &#x3D;&gt; {
        this.validate();
      });
    } else if (this.answersOrMeasures.length &gt; 0) {
      let count &#x3D; 0;
      this.answersOrMeasures.forEach((answerOrMeasure) &#x3D;&gt; {
        this.deleteEvaluationInDb(this.getAnswerReferenceTo(answerOrMeasure)).then(() &#x3D;&gt; {
          count++;
          if (count &#x3D;&#x3D;&#x3D; this.answersOrMeasures.length) {
            this.validate();
          }
        });
      });
    }
  }

  /**
   * Cancel validation and return in evaluation mode.
   * @memberof GlobalEvaluationService
   */
  cancelValidation() {
    if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27;) {
      const evaluation &#x3D; new Evaluation();
      evaluation.getByReference(this.pia.id, this.reference_to).then(() &#x3D;&gt; {
        evaluation.global_status &#x3D; 1;
        evaluation.update().then(() &#x3D;&gt; {
          this.validate();
        });
      });
    } else if (this.answersOrMeasures.length &gt; 0) {
      let count &#x3D; 0;
      this.answersOrMeasures.forEach((answerOrMeasure) &#x3D;&gt; {
        const evaluation &#x3D; new Evaluation();
        evaluation.getByReference(this.pia.id, this.getAnswerReferenceTo(answerOrMeasure)).then(() &#x3D;&gt; {
          evaluation.global_status &#x3D; 1;
          evaluation.update().then(() &#x3D;&gt; {
            count++;
            if (count &#x3D;&#x3D;&#x3D; this.answersOrMeasures.length) {
              this.validate();
            }
          });
        });
      });
    }
  }

  /**
   * Verification for DPD fields.
   * @private
   * @memberof GlobalEvaluationService
   */
  private dpoValidation() {
    let dpoFilled &#x3D; false;
    let concernedPeopleOpinionSearchedFieldsFilled &#x3D; false;
    let concernedPeopleOpinionUnsearchedFieldsFilled &#x3D; false;
    // All DPO fields filled &#x3D; OK
    if (this.pia.dpos_names &amp;&amp; this.pia.dpos_names.length &gt; 0 &amp;&amp; (this.pia.dpo_status &#x3D;&#x3D;&#x3D; 0 || this.pia.dpo_status &#x3D;&#x3D;&#x3D; 1)
        &amp;&amp; this.pia.dpo_opinion &amp;&amp; this.pia.dpo_opinion.length &gt; 0) {
        dpoFilled &#x3D; true;
    }

    // Concerned people opinion unsearched + no search reason field filled &#x3D; OK
    if (this.pia.concerned_people_searched_opinion &#x3D;&#x3D;&#x3D; false) {
      if (this.pia.concerned_people_searched_content &amp;&amp; this.pia.concerned_people_searched_content.length &gt; 0) {
        concernedPeopleOpinionUnsearchedFieldsFilled &#x3D; true;
      }
    }

    // Concerned people opinion searched + name(s) + status + opinions &#x3D; OK :
    if (this.pia.concerned_people_searched_opinion &#x3D;&#x3D;&#x3D; true) {
      if (this.pia.people_names &amp;&amp; this.pia.people_names.length &gt; 0
          &amp;&amp; (this.pia.concerned_people_status &#x3D;&#x3D;&#x3D; 0 || this.pia.concerned_people_status &#x3D;&#x3D;&#x3D; 1)
          &amp;&amp; this.pia.concerned_people_opinion &amp;&amp; this.pia.concerned_people_opinion.length &gt; 0) {
            concernedPeopleOpinionSearchedFieldsFilled &#x3D; true;
      }
    }

    // Treatment which validates the subsection if everything is OK
    // DPO filled + unsearched opinion scenario filled OR DPO filled + searched opinion scenario filled
    if ((dpoFilled &#x3D;&#x3D;&#x3D; true &amp;&amp; concernedPeopleOpinionUnsearchedFieldsFilled &#x3D;&#x3D;&#x3D; true)
        || (dpoFilled &#x3D;&#x3D;&#x3D; true &amp;&amp; concernedPeopleOpinionSearchedFieldsFilled &#x3D;&#x3D;&#x3D; true)) {
      this.status &#x3D; 7;
      this.enablePiaValidation &#x3D; [0, 2, 3].includes(this.pia.status);
      this.piaIsRefused &#x3D; [1, 4].includes(this.pia.status);
      if (this.pia.status &gt; 1) {
        this.status &#x3D; 8;
      }
    } else {
      this.enablePiaValidation &#x3D; false;
      this.piaIsRefused &#x3D; false;
      this.status &#x3D; 0;
    }
  }

  /**
   * Get the reference.
   * @private
   * @param {any} answerOrMeasure - Any Answer or Measure.
   * @returns {string} - The reference.
   * @memberof GlobalEvaluationService
   */
  private getAnswerReferenceTo(answerOrMeasure) {
    let reference_to &#x3D; this.reference_to;
    if (this.item.is_measure) {
      // For measure
      reference_to +&#x3D; &#x27;.&#x27; + answerOrMeasure.id;
    } else {
      // For question
      reference_to +&#x3D; &#x27;.&#x27; + answerOrMeasure.reference_to;
    }
    return reference_to;
  }

  /**
   * Create a new evaluation or udpate it.
   * @private
   * @param {string} [new_reference_to] - The reference.
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  private async createOrUpdateEvaluation(new_reference_to?: string) {
    return new Promise((resolve, reject) &#x3D;&gt; {
      const reference_to &#x3D; new_reference_to ? new_reference_to : this.reference_to;
      const evaluation &#x3D; new Evaluation();
      evaluation.getByReference(this.pia.id, reference_to).then((result: any) &#x3D;&gt; {
        if (!result) {
          evaluation.pia_id &#x3D; this.pia.id;
          evaluation.reference_to &#x3D; reference_to;
          evaluation.create().then(() &#x3D;&gt; {
            resolve();
          });
        } else if (evaluation.status &#x3D;&#x3D;&#x3D; 1) {
          evaluation.global_status &#x3D; 0;
          evaluation.update().then(() &#x3D;&gt; {
            resolve();
          });
        } else {
          resolve();
        }
      });
    });
  }

  /**
   * Do a global verification.
   * @private
   * @memberof GlobalEvaluationService
   */
  private verification() {
    if (!this.answersOrMeasures) {
      return;
    }
    const answersOrMeasuresValid: Array&lt;Answer|Measure&gt; &#x3D; this.answersOrMeasures.filter((answerOrMeasure: any) &#x3D;&gt; {
      if (answerOrMeasure.data !&#x3D;&#x3D; undefined) {
        return this.answerIsValid(answerOrMeasure);
      } else {
        return this.measureIsValid(answerOrMeasure);
      }
    });
    if (this.answersOrMeasures.length &gt; 0 &amp;&amp; answersOrMeasuresValid.length &#x3D;&#x3D;&#x3D; this.questionsOrMeasures.length) {
      if (this.evaluations.length &#x3D;&#x3D;&#x3D; 0) {
        this.status &#x3D; 2;
      } else {
        const evaluationsStarted: Array&lt;Evaluation&gt; &#x3D; this.evaluations.filter((evaluation: Evaluation) &#x3D;&gt; {
          return this.evaluationStarted(evaluation);
        });
        if (evaluationsStarted.length &#x3D;&#x3D;&#x3D; this.evaluations.length) {
          const evaluationsCompleted: Array&lt;Evaluation&gt; &#x3D; this.evaluations.filter((evaluation: Evaluation) &#x3D;&gt; {
            return this.evaluationCompleted(evaluation);
          });
          if (evaluationsCompleted.length &#x3D;&#x3D;&#x3D; this.evaluations.length) {
            if (this.pia.status &gt;&#x3D; 2) {
              this.status &#x3D; 8;
            } else {
              this.status &#x3D; 7;
            }
          } else {
            // If we have one or more evaluation status &quot;toBeFixed&quot;
            const evaluationToBeFixed: Array&lt;Evaluation&gt; &#x3D; this.evaluations.filter((evaluation: Evaluation) &#x3D;&gt; {
              return this.evaluationsToBeFixed(evaluation);
            });
            if (evaluationToBeFixed.length &gt; 0) {
              this.status &#x3D; 3;
            } else {
              const evaluationsIsValid: Array&lt;Evaluation&gt; &#x3D; this.evaluations.filter((evaluation: Evaluation) &#x3D;&gt; {
                return this.evaluationIsValid(evaluation);
              });
              if (evaluationsIsValid.length &gt; 0 &amp;&amp; evaluationsIsValid.length &#x3D;&#x3D;&#x3D; this.evaluations.length) {
                this.status &#x3D; 6;
              } else {
                this.status &#x3D; 5;
              }
            }
          }
        } else {
          const evaluationsNotStarted: Array&lt;Evaluation&gt; &#x3D; this.evaluations.filter((evaluation: Evaluation) &#x3D;&gt; {
            return this.evaluationNotStarted(evaluation);
          });
          if (evaluationsNotStarted.length &#x3D;&#x3D;&#x3D; this.evaluations.length) {
            this.status &#x3D; 4;
          } else {
            this.status &#x3D; 5;
          }
        }
      }
    } else if (this.answersOrMeasures.length &gt; 0) {
      this.status &#x3D; 1;
    } else {
      this.status &#x3D; 0;
    }
  }

  /**
   * The evaluation need to be fixed?
   * @private
   * @param {Evaluation} evaluation - An Evaluation.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private evaluationsToBeFixed(evaluation: Evaluation) {
    if (evaluation.status &#x3D;&#x3D;&#x3D; 1 &amp;&amp; evaluation.global_status &#x3D;&#x3D;&#x3D; 1) {
      return true;
    }
    return false;
  }

  /**
   * The evaluation is started?
   * @private
   * @param {Evaluation} evaluation - An Evaluation.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private evaluationStarted(evaluation: Evaluation) {
    if (evaluation.status &gt; 0) {
      return true;
    }
    return false;
  }

  /**
   * The evaluation is completed?
   * @private
   * @param {Evaluation} evaluation - An Evaluation.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private evaluationCompleted(evaluation: Evaluation) {
    if (evaluation.status &gt; 1 &amp;&amp; evaluation.global_status &#x3D;&#x3D;&#x3D; 2) {
      return true;
    }
    return false;
  }

  /**
   * The evaluation isn&#x27;t started?
   * @private
   * @param {Evaluation} evaluation - An Evaluation.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private evaluationNotStarted(evaluation: Evaluation) {
    if (evaluation.status &#x3D;&#x3D;&#x3D; 0) {
      return true;
    }
    return false;
  }

  /**
   * Is the measure valid?
   * @private
   * @param {Measure} measure - A Measure.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private measureIsValid(measure: Measure) {
    if (measure.content &amp;&amp; measure.content.length &gt; 0 ||
        measure.title &amp;&amp; measure.title.length &gt; 0) {
      return true;
    }
    return false;
  }

  /**
   * Is the answer valid?
   * @private
   * @param {Answer} answer - An Answer.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private answerIsValid(answer: Answer) {
    let valid &#x3D; false;
    const gauge &#x3D; answer.data.gauge;
    const text &#x3D; answer.data.text;
    const list &#x3D; answer.data.list;

    // First we need to find the answer_type
    const question &#x3D; this.item.questions.filter((q) &#x3D;&gt; {
      return parseInt(q.id, 10) &#x3D;&#x3D;&#x3D; parseInt(answer.reference_to, 10);
    });

    if (question.length &#x3D;&#x3D;&#x3D; 1) {
      const answer_type &#x3D; question[0].answer_type;
      if (answer_type &#x3D;&#x3D;&#x3D; &#x27;gauge&#x27;) {
        valid &#x3D; text &amp;&amp; text.length &gt; 0 &amp;&amp; gauge &gt; 0;
      } else if (answer_type &#x3D;&#x3D;&#x3D; &#x27;list&#x27;) {
        valid &#x3D; list &amp;&amp; list.length &gt; 0;
      } else if (answer_type &#x3D;&#x3D;&#x3D; &#x27;text&#x27;) {
        valid &#x3D; text &amp;&amp; text.length &gt; 0;
      }
    }

    return valid;
  }

  /**
   * Is the evaluation valid?
   * @private
   * @param {Evaluation} evaluation - An Evaluation.
   * @returns {boolean}
   * @memberof GlobalEvaluationService
   */
  private evaluationIsValid(evaluation: Evaluation) {
    if (evaluation.status &#x3D;&#x3D;&#x3D; 1) {
      return evaluation.evaluation_comment &amp;&amp; evaluation.evaluation_comment.length &gt; 0;
    } else if (evaluation.status &#x3D;&#x3D;&#x3D; 2) {
      if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;question&#x27;) {
        return evaluation.action_plan_comment &amp;&amp; evaluation.action_plan_comment.length &gt; 0;
      }
      if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27; &amp;&amp; this.item.evaluation_with_gauge &#x3D;&#x3D;&#x3D; true) {
        if (evaluation.gauges &amp;&amp; evaluation.gauges[&#x27;x&#x27;] &gt; 0 &amp;&amp; evaluation.gauges[&#x27;y&#x27;] &gt; 0
            &amp;&amp; evaluation.action_plan_comment &amp;&amp; evaluation.action_plan_comment.length &gt; 0) {
          return true;
        }
      }
    } else if (evaluation.status &#x3D;&#x3D;&#x3D; 3) {
      return true;
    }
    return false;
  }

  /**
   * Verification for all answers.
   * @private
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  private async answersVerification() {
    let count &#x3D; 0;
    this.answersOrMeasures &#x3D; [];
    return new Promise((resolve, reject) &#x3D;&gt; {
      if (this.item.is_measure) {
        const measureModel &#x3D; new Measure();
        measureModel.pia_id &#x3D; this.pia.id;
        measureModel.findAll().then((measures: any[]) &#x3D;&gt; {
          if (measures &amp;&amp; measures.length &gt; 0) {
            this.questionsOrMeasures &#x3D; measures;
            measures.forEach(measure &#x3D;&gt; {
              count++;
              if (measure.title &amp;&amp; measure.title.length &gt; 0 &amp;&amp; measure.content &amp;&amp; measure.content.length &gt; 0) {
                this.answersOrMeasures.push(measure);
              }
              if (count &#x3D;&#x3D;&#x3D; measures.length) {
                resolve();
              }
            });
          } else {
            resolve();
          }
        });
      } else {
        this.questionsOrMeasures &#x3D; this.item.questions;
        if (this.item.questions) {
          this.item.questions.forEach((question: any) &#x3D;&gt; {
            const answerModel &#x3D; new Answer();
            answerModel.getByReferenceAndPia(this.pia.id, question.id).then((result: boolean) &#x3D;&gt; {
              count++;
              if (result) {
                this.answersOrMeasures.push(answerModel);
              }
              if (count &#x3D;&#x3D;&#x3D; this.item.questions.length) {
                resolve();
              }
            });
          });
        } else {
          resolve();
        }
      }
    });
  }

  /**
   * Verification for all evaluations.
   * @private
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  private async evaluationsVerification() {
    let count &#x3D; 0;
    this.evaluations &#x3D; [];
    return new Promise((resolve, reject) &#x3D;&gt; {
      if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;item&#x27;) {
        const evaluationModel &#x3D; new Evaluation();
        evaluationModel.getByReference(this.pia.id, this.reference_to).then((result: any) &#x3D;&gt; {
          this.evaluations &#x3D; result ? [evaluationModel] : [];
          resolve();
        });
      } else if (this.item.is_measure) {
        const measureModel &#x3D; new Measure();
        measureModel.pia_id &#x3D; this.pia.id;
        measureModel.findAll().then((measures: any) &#x3D;&gt; {
          if (measures &amp;&amp; measures.length &gt; 0) {
            measures.forEach(measure &#x3D;&gt; {
              const evaluationModel &#x3D; new Evaluation();
              evaluationModel.getByReference(this.pia.id, this.reference_to + &#x27;.&#x27; + measure.id).then((result: any) &#x3D;&gt; {
                count++;
                if (result) {
                  this.evaluations.push(evaluationModel);
                }
                if (count &#x3D;&#x3D;&#x3D; measures.length) {
                  resolve();
                }
              });
            });
          } else {
            resolve();
          }
        });
      } else if (this.item.evaluation_mode &#x3D;&#x3D;&#x3D; &#x27;question&#x27;) {
        this.item.questions.forEach(question &#x3D;&gt; {
          const answerModel &#x3D; new Answer();
          answerModel.getByReferenceAndPia(this.pia.id, question.id).then((result: any) &#x3D;&gt; {
            if (result) {
              const evaluationModel &#x3D; new Evaluation();
              evaluationModel.getByReference(this.pia.id, this.reference_to + &#x27;.&#x27; + answerModel.reference_to).then((result2: any) &#x3D;&gt; {
                count++;
                if (result2) {
                  this.evaluations.push(evaluationModel);
                }
                if (count &#x3D;&#x3D;&#x3D; this.item.questions.length) {
                  resolve();
                }
              });
            } else {
              resolve();
            }
          });
        });
      }
    });
  }

  /**
   * Delete evaluation in database.
   * @private
   * @param {string} reference_to - The reference.
   * @returns {Promise}
   * @memberof GlobalEvaluationService
   */
  private async deleteEvaluationInDb(reference_to: string) {
    const evaluation &#x3D; new Evaluation();
    return new Promise((resolve, reject) &#x3D;&gt; {
      evaluation.getByReference(this.pia.id, reference_to).then((entry: any) &#x3D;&gt; {
        if (entry !&#x3D;&#x3D; false) {
          evaluation.delete(evaluation.id).then(() &#x3D;&gt; {
            resolve();
          });
        } else {
          resolve();
        }
      });
    });
  }

  /**
   * Set answer edition by status.
   * @memberof GlobalEvaluationService
   */
  setAnswerEditionEnabled() {
    this.answerEditionEnabled &#x3D; [0, 1, 2, 3].includes(this.status);
  }

  /**
   * Set evaluation edition by status.
   * @memberof GlobalEvaluationService
   */
  setEvaluationEditionEnabled() {
    this.evaluationEditionEnabled &#x3D; [4, 5, 6].includes(this.status);
  }
}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'GlobalEvaluationService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <script src="../js/menu-wc.js"></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
