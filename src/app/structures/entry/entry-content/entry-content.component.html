<section class="pia-entryContentBlock pia-entryContentBlock-section{{section.id}}" *ngIf="section && item">
  <header autoscroll="true" class="pia-entryContentBlock-header">
    <div>
      <i class="fa fa-sitemap" aria-hidden="true"></i>
    </div>
    <div class="pia-entryContentBlock-header-title">
      <h1 *ngIf="section.title">{{ section.title | translate }}</h1>
      <h3 *ngIf="section.short_help">{{ section.short_help | translate }}</h3>
      <h2 *ngIf="item.title">{{ item.title | translate }}</h2>
      <h4 *ngIf="item.short_help">{{ item.short_help | translate }}</h4>
    </div>
    <a *ngIf="section.id === 4 && item.id === 2;else defaultBlock" routerLink="/summary/{{_structureService.structure.id}}" [queryParams]="{ displayOnlyActionPlan: true }" class="btn pia-previewBlock">
      <span class="pia-icons pia-icon-preview"></span>
      <div [innerHTML]="'pia.header.display_action_plan' | translate"></div>
    </a>
    <ng-template #defaultBlock>
      <a routerLink="/summary/{{_structureService.structure.id}}" class="btn pia-previewBlock">
        <span class="pia-icons pia-icon-preview"></span>
        <div>{{ 'pia.header.preview' | translate }}</div>
      </a>
    </ng-template>
  </header>

  <!-- Back to edition -->
  <div class="pia-status-info" *ngIf="_globalEvaluationService.status === 4 && _structureService.structure.is_example !== 1">
    <strong>{{ 'pia.sections.status.evaluation.title' | translate }}</strong>
    <p>
      <span [innerHTML]="'pia.sections.status.evaluation.content' | translate"></span>
      <a href="javascript:;" (click)="cancelAskForEvaluation()" [innerHTML]="'pia.sections.status.evaluation.cancel' | translate"></a>
    </p>
  </div>

  <!-- Back to evaluation -->
  <div class="pia-status-info" *ngIf="_globalEvaluationService.status === 7 && _structureService.structure.is_example !== 1 && !(section.id == 4 && item.id == 3)">
    <strong>{{ 'pia.sections.status.validation.title' | translate }}</strong>
    <p>
      <span [innerHTML]="'pia.sections.status.validation.content' | translate"></span>
      <a href="javascript:;" (click)="cancelValidateEvaluation()" [innerHTML]="'pia.sections.status.validation.cancel' | translate"></a>
    </p>
  </div>

  <ng-container *ngIf="item.is_measure; else appQuestions">
    <button (click)="addMeasure()"
            class="btn btn-white btn-addMeasure" type="button">
      <span class="pia-icons pia-icon-add"></span>
      {{ 'measures.add' | translate }}
    </button>
    <app-measures *ngFor="let measure of item.answers; let i = index" [id]="i" [measure]="measure" [section]="section" [item]="item"></app-measures>
  </ng-container>
  <ng-template #appQuestions>
    <div *ngFor="let question of questions">
      <app-questions [question]="question" [section]="section" [item]="item"></app-questions>
    </div>
  </ng-template>

  <footer class="pia-entryContentBlock-footer" *ngIf="!item.is_measure">
    <div>
      <button class="btn btn-green btn-active" (click)="addQuestion()">
        <i class="fa fa-plus" aria-hidden="true"></i>
        {{ 'pia.footer.structure_add_question' | translate }}
      </button>
    </div>
  </footer>
</section>
